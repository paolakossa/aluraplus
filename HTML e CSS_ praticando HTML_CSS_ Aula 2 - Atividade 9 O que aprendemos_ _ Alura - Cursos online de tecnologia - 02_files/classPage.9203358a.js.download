"use strict";function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Task=function(){function s(t){var e=t.data("task-id");t.data("author-id");return{taskId:e}}function o(){var t=$(".task-feedback"),e=$("#task-content .task-actions"),a=$(".markdownEditor, .openQuestion-answer-title");$(".task-actions").show(),0<t.length&&(e.addClass("screenReader-only"),$(".screenReader-only .task-actions-button-forum").hide(),0<a.length&&a.hide(),t.addClass("task-feedback--visible"),t.attr("aria-hidden","false"),sticky&&sticky.recalc()),n()}function r(t,e,a){var n=document.open("text/html","replace");n.write(t.responseText),n.close()}function n(){var t=$(".task-body-actions-button.task-actions-button-answer");t.removeClass("task-actions-button-spinning"),t.prop("disabled",!1)}function c(){$(".choiceable-opinion").css("display","block")}var l=$(".task"),u=l.data("task-type"),d=l.data("course-code"),p=l.data("section-number");function m(t){return t.split(new RegExp("[`'‘’]")).join("'")}return{submitAnswer:function(t,e){l.data("hasfeedbackanswer")||((n=$(".task-body-actions-button.task-actions-button-answer")).addClass("task-actions-button-spinning"),n.prop("disabled",!0));var a=s(l),n=$(".repetition"),i=(n[0]&&(u=n.data("repeatable-type"),d=l.data("course-code"),p=l.data("section-number"),(a=s(n)).fromRepetition=!0),a.alternatives=[],"singlechoice"==u?(i=$(".alternativeList-item-input:checked"),a.alternatives.push(i.attr("id")),c()):"multiplechoice"==u?(a.alternatives=[],$(".alternativeList-item-input:checked").each(function(t){a.alternatives.push($(this).attr("id"))}),c()):"openquestion"==u?(a.answeredText=$(".markdownEditor-textArea").val(),a.answeredTextHighlight=$("input[name='answeredTextHighlight']").val()):"fillintheblank"==u?(i=$(".phrase-input").val(),a.answeredText=m(i.trim())):"speakingpractice"==u||"pronunciationpractice"==u?a.feedback=e:"projectsubmit"!=u&&"bootcampprojectsubmit"!=u||(a.projectUrl=e),l.data("url-prefix"));$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:i+"course/"+d+"/section/"+p+"/"+u+"/answer",data:JSON.stringify(a),dataType:"json",success:t||o,statusCode:{200:t||o,400:t||o,403:t||o,500:r}}).always(function(){return Task.canShowSubmitExam()})},showOpinionIfAvailable:o,toggleChoiceableOpinion:c,enableButton:n,isExam:function(){return l.data("task-section-exam")},allowAnswer:function(){return l.data("allow-answer")},canShowSubmitExam:function(){var t,e,a,n,i,s,o;Task.isExam()&&(t=$(".task"),e=t.data("url-prefix"),a=$(".task-actions-button-complete"),n=t.data("course-code"),i=t.data("task-id"),s=t.data("section-id"),o=t.data("section-name"),$.get(e+"course/"+n+"/task/"+i+"/show/submit/exam",function(t){JSON.parse(t)&&0==a.length&&((t=$("<a>")).attr("href",e+"course/"+n+"/section/"+s+"/exam/complete"),t.addClass("task-actions-button task-body-actions-button task-actions-button-complete"),t.text("Submeter a "+o),0<$(".task-actions .container a").length?$(".task-actions .container a").before(t):$(".task-actions .container").append(t))}))},answerWithCorrectApostrophe:m}}(),Choiceable=function(){function t(){Task.isExam()||($(".alternativeList-item-opinionButton").each(function(){var t=$(this)[0];t.classList.contains("alternativeList-item-opinionButton--visible")||t.classList.add("alternativeList-item-opinionButton--visible")}),$(".task-actions").css("display","block"),$(".task-actions-button-next").css("display","inline-block"),sticky.recalc())}function e(){Task.isExam()&&Task.allowAnswer()||($(".alternativeList-item-input").each(function(){$(this).attr("disabled","true")}),$(".alternativeList-item-span").addClass("alternativeList-item-span-disabled"))}return _defineProperty({setup:function(){$(".alternativeList-item-opinionButton").on("click",function(t){t.preventDefault(),$(this).parents("li").toggleClass("alternativeList-item--active"),Aria.expandingButton($(this))}),Task.isExam()&&!Task.allowAnswer()&&e()},updateSubmitAnswerIf:function(t){Task.isExam()||t&&$("#task-content").attr("data-should-submit-answer",!1)},isChecked:function(t){return t.hasClass("alternativeList-item--checked")},isOpinionIcon:function(t){return t.target.classList.contains("alternativeList-item-opinionIcon-use")||t.target.classList.contains("alternativeList-item-opinionIcon")},showAlternativeOpinionsAndNextButton:t,toggleLabelClass:function(t){t.toggleClass("alternativeList-item--checked")},showAlternativeOpinions:function(){Task.isExam()||($(".alternativeList-item--checked").each(function(){var t,e=$(this);0<e.find(".alternativeList-item-opinionIcon").length&&(e.addClass("alternativeList-item--active"),t=e.find(".alternativeList-item-opinionButton"),Aria.expandingButton(t)),e.data("correct")?$(".singleChoice-alternative-aria-feedback").text("Alternativa correta"):$(".singleChoice-alternative-aria-feedback").text("Alternativa incorreta")}),sticky.recalc())},disableAllAlternatives:e},"showAlternativeOpinionsAndNextButton",t)}(),sticky=(!function(){var n=$(".task"),e=n.data("domain"),i=$(".openMenu-button"),a=!1,s=!1,o=$(".task-container-flex"),r=$(".task-group-border");function c(){var t="gnarus.menuClosed="+n.hasClass("menu--inactive")+"; path=/; domain="+e;document.cookie=t}$(".task-menu-button, .task-body-button").on("click",function(t){t.stopPropagation(),n.toggleClass("menu--inactive"),o.toggleClass("--task-button-column"),r.toggleClass("--task-closed-border"),i.toggleClass("openMenu-button--inactive");var e="Abrir menu",a="Fechar menu";i.hasClass("openMenu-button--inactive")?i.each(function(){$(this).attr("aria-label",e),$(this).attr("title",e)}):i.each(function(){$(this).attr("aria-label",a),$(this).attr("title",a)}),c(),sticky.recalc()}),$(".task-submit").on("click",function(t){$(".task-body-main").data("should-warn")&&a&&!s&&0==window.confirm("Suas alterações ainda não foram salvas, clique em Responder para salvá-las. Deseja ir para a próxima aula?")&&t.preventDefault()}),$(".markdownEditor-textArea, .phrase-input").on("change",function(){a=!0}),$(".task-actions-button-answer").on("click",function(){s=!0}),$(document).click(function(t){$(window).width()<768&&($(t.target).closest(".task-menu-button").length||$(t.target).closest(".task-menu").length||$(t.target).closest(".settings-box").length||(n.addClass("menu--inactive"),i.addClass("task-menu-button--inactive"),c()))}),$(window).on("load",function(){Task.isExam()?$("#task-content").attr("data-should-submit-answer",!0):0<$(".alternativeList-item--checked").length&&(Task.toggleChoiceableOpinion(),Choiceable.showAlternativeOpinions(),Choiceable.showAlternativeOpinionsAndNextButton())}),$(".task-actions-button-answer").on("click",function(){$(this).attr("aria-expanded","true")}),$("[data-submittable=true]").on("click",function(){Task.submitAnswer()}),$(".task-actions-button-showOpinion").on("click",function(){Task.showOpinionIfAvailable()}),new ProjectSubmit(Task).initialize()}(),function(){var n,i,s,o,r,c=document.querySelector(".task-menu"),t=document.querySelector(".task-body");{if(("scrollY"in window||"pageYOffset"in window)&&"requestAnimationFrame"in window)return window.addEventListener("resize",e),setTimeout(e,0),setTimeout(e,200),o=window.scrollY||window.pageYOffset,r=0,requestAnimationFrame(function t(){var e,a;c&&(s<n||window.innerWidth<=691?c.style.position="absolute":(c.style.position="fixed",a=window.scrollY||window.pageYOffset,o==a||a<0||document.documentElement.offsetHeight-i<a||(e=Math.max(Math.min(r+a-o,n-i),0),isNaN(e)||(e!=r&&(c.style.transform="translateY("+-e+"px)",r=e),o=a))),requestAnimationFrame(t))}),{recalc:e};c.style.position="absolute"}function e(){c&&(n=c.getBoundingClientRect().height,i=window.innerHeight,s=t.getBoundingClientRect().height)}}());